import{_ as T,r as n,o as i,e as _,w as o,b as t,g as p,f as c,t as g,c as h,d as P,F as R,a}from"./index-b1207d8a.js";const D={emits:["change","close"],props:{isDialog:{default:!1,type:Boolean},pageTitle:{default:"User Registration",type:String}},data(){return{name:"",mail:"",role_data:0,errors:[],isReadonly:!1,roles:[]}},components:{},setup(){},created(){this.password="",this.get_Roles()},mounted(){},methods:{get_Roles(){this.$axios.post(this.$serverURL+"api/roles/get",{}).then(l=>{l.data.code==200&&(this.roles=l.data.data,this.roles.length>0&&(this.role_data=this.roles[0].id),this.set_Paginate())}).catch(l=>{})},submit(){this.errors=[],this.mail==""&&this.errors.push("Email is required"),this.name==""&&this.errors.push("Name is required"),this.role_data==0&&this.errors.push("Role is required"),!(this.errors.length>0)&&this.$axios.post(this.$serverURL+"api/users/web-admin/register",{tokenString:localStorage.getItem("userToken"),role_data:this.role_data,data:{email:this.mail,name:this.name}}).then(l=>{l.data.code==200?(this.password=l.data.user_data.password,this.isReadonly=!0):(this.errors.push("Something went wrong please try again later."),this.name="",this.mail="",this.errors=[],this.isReadonly=!1)}).catch(l=>{})}}},E={class:"table"},L=a("th",{class:"text-end"}," Password : ",-1),q={class:"fs-2 text-center"};function z(l,e,x,N,s,m){const f=n("v-spacer"),u=n("v-btn"),v=n("v-card-actions"),w=n("v-card-title"),k=n("v-text-field"),U=n("v-select"),y=n("v-list-item"),V=n("v-list"),b=n("v-col"),C=n("v-row"),S=n("v-card-text"),r=n("v-icon"),B=n("v-card");return i(),_(B,{class:"bg-white h-100"},{default:o(()=>[x.isDialog?(i(),_(v,{key:0,"fixed-header":""},{default:o(()=>[t(f),t(u,{fab:"",icon:"mdi-close",class:"bg-danger text-white",onClick:e[0]||(e[0]=d=>l.$emit("close"))})]),_:1})):p("",!0),t(w,{"fixed-header":""},{default:o(()=>[c(g(x.pageTitle),1)]),_:1}),t(S,null,{default:o(()=>[t(C,{justify:"center"},{default:o(()=>[t(b,{cols:"12",sm:"12"},{default:o(()=>[t(k,{readonly:s.isReadonly,modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=d=>s.name=d),"prepend-inner-icon":"mdi-account","persistent-hint":"",hint:"Full Name"},null,8,["readonly","modelValue"]),t(k,{readonly:s.isReadonly,modelValue:s.mail,"onUpdate:modelValue":e[2]||(e[2]=d=>s.mail=d),"prepend-inner-icon":"mdi-web","persistent-hint":"",hint:"Email Address"},null,8,["readonly","modelValue"]),t(U,{modelValue:s.role_data,"onUpdate:modelValue":e[3]||(e[3]=d=>s.role_data=d),label:"Role","item-value":"id","item-title":"title",items:s.roles},null,8,["modelValue","items"]),t(V,{density:"compact"},{default:o(()=>[(i(!0),h(R,null,P(s.errors,d=>(i(),_(y,null,{default:o(()=>[c(g(d),1)]),_:2},1024))),256))]),_:1})]),_:1}),s.isReadonly?(i(),_(b,{key:0,cols:"12",sm:"12"},{default:o(()=>[a("table",E,[a("tr",null,[L,a("th",q,g(l.password),1)])])]),_:1})):p("",!0)]),_:1})]),_:1}),t(v,null,{default:o(()=>[s.isReadonly?(i(),_(u,{key:0,onClick:e[4]||(e[4]=d=>l.$emit("close")),class:"bg-danger text-white"},{default:o(()=>[t(r,{class:"me-1"},{default:o(()=>[c("mdi-close")]),_:1}),c("Close")]),_:1})):p("",!0),t(f),s.isReadonly?p("",!0):(i(),_(u,{key:1,onClick:m.submit,class:"bg-success"},{default:o(()=>[t(r,{class:"me-1"},{default:o(()=>[c("mdi-account-plus")]),_:1}),c("Register User")]),_:1},8,["onClick"]))]),_:1})]),_:1})}const F=T(D,[["render",z]]),I={emits:["change","close"],components:{UserRegistration:F},props:{userToken:{type:String,default:localStorage.getItem("userToken")}},data(){return{show_Registration:!1,data:[],paginate:[],curPage:1,chunkSize:10,search:"",users:[]}},setup(){},created(){this.get_Users()},mounted(){},methods:{set_Paginate(l){this.paginate=[];for(let e=0;e<l.length;e+=this.chunkSize)this.paginate.push(l.slice(e,e+this.chunkSize));this.curPage=1},get_Users(){this.$axios.post(this.$serverURL+"api/users/web-admin/list",{tokenString:localStorage.getItem("userToken")}).then(l=>{l.data.code==200&&(this.data=l.data.results,this.set_Paginate(this.data))}).catch(l=>{})}}},A=a("thead",null,[a("tr",null,[a("th",{class:"text-left"}," Name "),a("th",{class:"text-left"}," Email "),a("th",{class:"text-left",style:{"max-width":"150px"}})])],-1),j={key:0};function G(l,e,x,N,s,m){const f=n("v-card-title"),u=n("v-btn"),v=n("v-card-actions"),w=n("v-text-field"),k=n("router-link"),U=n("v-table"),y=n("v-card-text"),V=n("v-pagination"),b=n("v-card"),C=n("UserRegistration"),S=n("v-dialog");return i(),h(R,null,[t(b,null,{default:o(()=>[t(f,null,{default:o(()=>[c(" Users ")]),_:1}),t(v,null,{default:o(()=>[t(u,{"prepend-icon":"mdi-refresh",onClick:e[0]||(e[0]=()=>{m.get_Users()}),class:"bg-info border"},{default:o(()=>[c(" Refresh ")]),_:1}),t(u,{"prepend-icon":"mdi-plus",onClick:e[1]||(e[1]=()=>{s.show_Registration=!0}),class:"bg-info border"},{default:o(()=>[c(" Register User ")]),_:1})]),_:1}),t(y,null,{default:o(()=>[t(w,{modelValue:s.search,"onUpdate:modelValue":e[2]||(e[2]=r=>s.search=r)},null,8,["modelValue"]),t(U,{search:s.search},{default:o(()=>[A,a("tbody",null,[(i(!0),h(R,null,P(s.paginate[s.curPage-1],r=>(i(),h(R,{key:r.email},[r.userToken!=this.userToken?(i(),h("tr",j,[a("td",null,g(r.name),1),a("td",null,g(r.email),1),a("td",null,[t(k,{to:{name:"Dashboard User Acount",params:{userToken:r.userToken}}},{default:o(()=>[t(u,{fab:"",color:"primary",class:"my-1",icon:"mdi-eye"})]),_:2},1032,["to"])])])):p("",!0)],64))),128))])]),_:1},8,["search"])]),_:1}),t(y,null,{default:o(()=>[t(V,{modelValue:s.curPage,"onUpdate:modelValue":e[3]||(e[3]=r=>s.curPage=r),length:s.paginate.length,"total-visible":7},null,8,["modelValue","length"])]),_:1})]),_:1}),t(S,{modelValue:s.show_Registration,"onUpdate:modelValue":e[6]||(e[6]=r=>s.show_Registration=r),width:"800",persistent:""},{default:o(()=>[t(C,{isDialog:!0,onClose:e[4]||(e[4]=()=>{m.get_Users(),s.show_Registration=!1}),onChange:e[5]||(e[5]=()=>{m.get_Users(),s.show_Registration=!1})})]),_:1},8,["modelValue"])],64)}const J=T(I,[["render",G]]);export{J as default};
