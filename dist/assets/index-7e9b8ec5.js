import{F as R,C as F}from"./Categories_Selector-c2cd8063.js";import{_ as T,r as i,o as r,c as N,b as n,w as a,e as c,f as d,g as A,a as P,F as U,t as I,j as x,v as S,d as B,n as z}from"./index-3a0f50d4.js";const K={emits:["change","close"],props:["parent_id"],data(){return{isBrowsingThumbnail:!1,isAdding:!1,newData:{name:"",description:"",urlKey:"",parent_id:this.parent_id,file_id:1},file_data:{filename:"Logo.svg"}}},components:{File_Upload:R},setup(){},created(){},mounted(){},methods:{save_Category(){this.newData.name.trim()!=""&&(this.newData.urlKey=this.newData.name.trim().toLocaleLowerCase().replace(/ /g,"-"),this.isUpdating=!0,this.$axios.post(this.$serverURL+"api/categories/web-admin/action",{tokenString:localStorage.getItem("userToken"),action:"append",data:this.newData}).then(s=>{this.$emit("change",s.data.data)}).catch(s=>{}))}}},j={style:{height:"80vh!important"}};function G(s,t,f,L,e,u){const g=i("v-spacer"),o=i("v-btn"),p=i("v-card-actions"),w=i("v-img"),h=i("v-col"),b=i("v-text-field"),y=i("v-textarea"),v=i("v-row"),m=i("v-card-text"),k=i("v-card"),V=i("File_Upload"),J=i("v-dialog");return r(),N(U,null,[n(k,{flat:"",class:"border w-100"},{default:a(()=>[n(p,null,{default:a(()=>[n(g),n(o,{fab:"",icon:"mdi-close",class:"bg-danger text-white",onClick:t[0]||(t[0]=l=>s.$emit("close"))})]),_:1}),n(v,null,{default:a(()=>[f.parent_id==0?(r(),c(h,{key:0,cols:"12",sm:"12",md:"4"},{default:a(()=>[n(w,{src:this.$serverURL+"resources/"+e.file_data.filename},null,8,["src"]),n(o,{onClick:t[1]||(t[1]=l=>{e.isBrowsingThumbnail=!0}),class:"w-100"},{default:a(()=>[d("Change thumbnail")]),_:1})]),_:1})):A("",!0),n(h,{cols:"12",sm:"12",md:f.parent_id==0?8:12},{default:a(()=>[n(b,{modelValue:e.newData.name,"onUpdate:modelValue":t[2]||(t[2]=l=>e.newData.name=l),label:"Name","persistent-hint":"",hint:e.newData.name.trim().toLocaleLowerCase().replace(/ /g,"-")},null,8,["modelValue","hint"]),f.parent_id==0?(r(),c(y,{key:0,class:"my-1",modelValue:e.newData.description,"onUpdate:modelValue":t[3]||(t[3]=l=>e.newData.description=l),hint:"Description","persistent-hint":""},null,8,["modelValue"])):A("",!0)]),_:1},8,["md"])]),_:1}),n(m),n(p,null,{default:a(()=>[n(o,{"prepend-icon":"mdi-cancel",onClick:t[4]||(t[4]=l=>s.$emit("close")),class:"bg-warning"},{default:a(()=>[d("Cancel")]),_:1}),n(g),n(o,{"prepend-icon":"mdi-content-save",onClick:u.save_Category,class:"bg-success"},{default:a(()=>[d("Save")]),_:1},8,["onClick"])]),_:1})]),_:1}),n(J,{modelValue:e.isBrowsingThumbnail,"onUpdate:modelValue":t[7]||(t[7]=l=>e.isBrowsingThumbnail=l)},{default:a(()=>[P("div",j,[n(V,{onChange:t[5]||(t[5]=l=>{e.file_data=l,e.newData.file_id=l.id,e.isBrowsingThumbnail=!1}),onClose:t[6]||(t[6]=l=>e.isBrowsingThumbnail=!1),pageTitle:"Select Thumbnail",isDialog:!0})])]),_:1},8,["modelValue"])],64)}const E=T(K,[["render",G]]),H={emits:[],props:["sub","isParent"],data(){return{showChild:!0,isEditing:!1,original_data:[],temp_data:{name:"",description:""},isUpdating:!1,newData:{name:""},isAdding:!1}},components:{Category_Append:E},setup(){},created(){this.temp_data=JSON.parse(JSON.stringify(this.sub)),this.original_data=JSON.parse(JSON.stringify(this.sub))},mounted(){},methods:{save_Category(){this.isUpdating=!0,this.$axios.post(this.$serverURL+"api/categories/web-admin/update",{tokenString:localStorage.getItem("userToken"),category_id:this.sub.id,action:"update",data:{name:this.temp_data.name,description:this.temp_data.description}}).then(s=>{s.data.code==200&&(this.isEditing=this.isUpdating=!1,this.showChild=!0,this.original_data=s.data.data,this.temp_data=JSON.parse(JSON.stringify(s.data.data)))}).catch(s=>{})}}},M={class:"h4 my-2 w-100"},Q=P("br",null,null,-1);function W(s,t,f,L,e,u){const g=i("v-icon"),o=i("v-btn"),p=i("v-card-text"),w=i("v-text-field"),h=i("v-divider"),b=i("Category_Child",!0),y=i("Category_Append"),v=i("v-card");return r(),c(v,{flat:"",class:z(f.isParent?"border":"")},{default:a(()=>[e.isEditing?A("",!0):(r(),c(p,{key:0},{default:a(()=>[P("span",M,[n(g,null,{default:a(()=>[d("mdi-chevron-right")]),_:1}),d(I(e.original_data.name),1)]),d(),Q,x(n(o,{fab:"",size:"x-small",class:"bg-success m-1",icon:"mdi-plus",onClick:t[0]||(t[0]=()=>{e.isAdding=!0,e.showChild=!1})},null,512),[[S,!e.isAdding&&!e.isEditing]]),x(n(o,{fab:"",size:"x-small",class:"bg-success m-1",icon:"mdi-pencil",onClick:t[1]||(t[1]=()=>{e.isEditing=!0,e.showChild=!1})},null,512),[[S,!e.isAdding&&!e.isEditing]])]),_:1})),e.isEditing?(r(),c(p,{key:1},{default:a(()=>[n(w,{disabled:e.isUpdating,modelValue:e.temp_data.name,"onUpdate:modelValue":t[2]||(t[2]=m=>e.temp_data.name=m),"persistent-hint":"",hint:"Name",class:"my-1"},null,8,["disabled","modelValue"]),n(o,{onClick:t[3]||(t[3]=()=>{e.isEditing=!1,e.showChild=!0}),variant:"outlined",class:"mx-1 bg-success text-white","prepend-icon":"mdi-cancel"},{default:a(()=>[d("Cancel")]),_:1}),x(n(o,{loading:e.isUpdating,onClick:u.save_Category,variant:"outlined",class:"mx-1 bg-warning text-white float-end","prepend-icon":"mdi-content-save"},{default:a(()=>[d("Save")]),_:1},8,["loading","onClick"]),[[S,e.original_data.name!=e.temp_data.name||e.original_data.description!=e.temp_data.description]])]),_:1})):A("",!0),x(n(h,{thickness:3,class:"border-opacity-50 mb-0",color:"error"},null,512),[[S,f.isParent]]),x(n(p,null,{default:a(()=>[(r(!0),N(U,null,B(e.original_data.full_data,(m,k)=>x((r(),c(b,{isParent:!1,sub:m},null,8,["sub"])),[[S,e.showChild]])),256))]),_:1},512),[[S,e.original_data.full_data.length>0]]),e.isAdding?(r(),c(y,{key:2,onChange:t[4]||(t[4]=m=>{this.temp_data=JSON.parse(JSON.stringify(m)),this.original_data=JSON.parse(JSON.stringify(m)),e.isAdding=!1,e.showChild=!0}),onClose:t[5]||(t[5]=()=>{e.isAdding=!1,e.showChild=!0}),parent_id:e.original_data.id},null,8,["parent_id"])):A("",!0)]),_:1},8,["class"])}const X=T(H,[["render",W]]),Y={emits:["change","dataChange"],props:["main"],data(){return{showAppend:!1,showImage:!1,showDialog:!1,original_data:[],temp_data:{name:"",description:""},isUpdating:!1}},components:{Category_Child:X,File_Upload:R,Category_Append:E},setup(){},created(){this.temp_data=JSON.parse(JSON.stringify(this.main)),this.original_data=JSON.parse(JSON.stringify(this.main))},mounted(){},methods:{save_Category(){this.isUpdating=!0,this.$axios.post(this.$serverURL+"api/categories/web-admin/action",{tokenString:localStorage.getItem("userToken"),category_id:this.original_data.id,action:"update",data:{name:this.original_data.name,description:this.original_data.description}}).then(s=>{s.data.code==200&&(this.temp_data=JSON.parse(JSON.stringify(s.data.data)),this.original_data=JSON.parse(JSON.stringify(s.data.data)),this.isUpdating=!1,this.$emit("dataChange",JSON.parse(JSON.stringify(s.data.data))))}).catch(s=>{})},setThumbnail(s){this.showDialog=!1,this.$axios.post(this.$serverURL+"api/categories/web-admin/action",{tokenString:localStorage.getItem("userToken"),category_id:this.original_data.id,action:"update",data:{file_id:s.id}}).then(t=>{t.data.code==200&&(this.temp_data=JSON.parse(JSON.stringify(t.data.data)),this.original_data=JSON.parse(JSON.stringify(t.data.data)),this.isUpdating=!1,this.$emit("dataChange",JSON.parse(JSON.stringify(t.data.data))))}).catch(t=>{})}}};function Z(s,t,f,L,e,u){const g=i("v-img"),o=i("v-btn"),p=i("v-col"),w=i("v-text-field"),h=i("v-textarea"),b=i("v-spacer"),y=i("v-card-actions"),v=i("v-row"),m=i("v-card-text"),k=i("Category_Child"),V=i("Category_Append"),J=i("v-card-item"),l=i("v-card"),C=i("v-card-title"),O=i("v-dialog"),D=i("File_Upload");return r(),N(U,null,[n(l,{flat:""},{default:a(()=>[n(m,{class:"text-black"},{default:a(()=>[n(v,null,{default:a(()=>[n(p,{cols:"12",sm:"12",md:"4"},{default:a(()=>[n(g,{onClick:t[0]||(t[0]=()=>{s.curImageSrc=s.img,e.showImage=!0}),src:this.$serverURL+"resources/"+e.original_data.thumbnail.filename},null,8,["src"]),n(o,{onClick:t[1]||(t[1]=_=>{e.showDialog=!0}),class:"w-100"},{default:a(()=>[d("Change thumbnail")]),_:1})]),_:1}),n(p,{cols:"12",sm:"12",md:"8"},{default:a(()=>[n(w,{disabled:e.isUpdating,class:"my-1",modelValue:e.original_data.name,"onUpdate:modelValue":t[2]||(t[2]=_=>e.original_data.name=_),hint:"Name","persistent-hint":""},null,8,["disabled","modelValue"]),n(h,{disabled:e.isUpdating,class:"my-1",modelValue:e.original_data.description,"onUpdate:modelValue":t[3]||(t[3]=_=>e.original_data.description=_),hint:"Description","persistent-hint":""},null,8,["disabled","modelValue"]),n(y,null,{default:a(()=>[n(b),x(n(o,{loading:e.isUpdating,onClick:u.save_Category,variant:"outlined",class:"mx-1 bg-success text-white","prepend-icon":"mdi-content-save"},{default:a(()=>[d("Save")]),_:1},8,["loading","onClick"]),[[S,e.original_data.name!=e.temp_data.name||e.original_data.description!=e.temp_data.description]])]),_:1})]),_:1})]),_:1})]),_:1}),n(J,null,{default:a(()=>[n(v,{class:"p-1"},{default:a(()=>[n(p,{cols:"12",sm:"12",class:"h4"},{default:a(()=>[d(" Sub-Categories ")]),_:1}),(r(!0),N(U,null,B(e.original_data.full_data,(_,te)=>(r(),c(p,{cols:"12",sm:"12",md:"4",class:"h-100",style:{"min-height":"100px"}},{default:a(()=>[n(k,{isParent:!0,sub:_},null,8,["sub"])]),_:2},1024))),256)),n(p,{cols:"12",sm:"12",md:"4",class:"h-100 d-flex"},{default:a(()=>[e.showAppend?(r(),c(V,{key:1,onChange:t[5]||(t[5]=_=>{e.showAppend=!1,this.temp_data=JSON.parse(JSON.stringify(_)),this.original_data=JSON.parse(JSON.stringify(_)),s.isAdding=!1,s.showChild=!0}),onClose:t[6]||(t[6]=()=>{e.showAppend=!1}),parent_id:e.original_data.id},null,8,["parent_id"])):(r(),c(o,{key:0,style:{"min-height":"200px"},onClick:t[4]||(t[4]=_=>e.showAppend=!0),class:"my-auto w-100",stacked:"","prepend-icon":"mdi-plus"},{default:a(()=>[d("Add")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),n(O,{modelValue:e.showImage,"onUpdate:modelValue":t[8]||(t[8]=_=>e.showImage=_)},{default:a(()=>[n(l,{class:"bg-white"},{default:a(()=>[n(C,{"fixed-header":""},{default:a(()=>[d(" Preview "),n(o,{icon:"mdi-close",onClick:t[7]||(t[7]=_=>e.showImage=!1),class:"text-white bg-danger float-end",fab:""})]),_:1}),n(g,{src:this.$serverURL+"resources/"+e.original_data.thumbnail.filename,style:{"max-height":"500px"}},null,8,["src"]),n(C,{"fixed-header":""})]),_:1})]),_:1},8,["modelValue"]),n(O,{modelValue:e.showDialog,"onUpdate:modelValue":t[10]||(t[10]=_=>e.showDialog=_),fullscreen:""},{default:a(()=>[n(D,{onChange:u.setThumbnail,onClose:t[9]||(t[9]=_=>e.showDialog=!1),pageTitle:"Category Thumbnail",isDialog:!0},null,8,["onChange"])]),_:1},8,["modelValue"])],64)}const q=T(Y,[["render",Z]]),$={emits:[],props:[],data(){return{isAdding:!1,itemsPerPage:5,categories:[]}},components:{Categories_Selector:F,Category_Parent:q,Category_Append:E},setup(){},created(){this.get_Categories("")},mounted(){},methods:{get_Categories(s){this.isAdding=!1,this.$axios.post(this.$serverURL+"api/categories/web-admin/list",{mode:s==""?"all":"search",text:s}).then(t=>{t.data.code==200&&(this.categories=t.data.data)}).catch(t=>{})}}};function ee(s,t,f,L,e,u){const g=i("v-card-title"),o=i("v-btn"),p=i("v-spacer"),w=i("v-card-actions"),h=i("v-expansion-panel-title"),b=i("Category_Parent"),y=i("v-expansion-panel-text"),v=i("v-expansion-panel"),m=i("v-expansion-panels"),k=i("v-card-text"),V=i("v-card"),J=i("Category_Append"),l=i("v-dialog");return r(),N(U,null,[n(V,null,{default:a(()=>[n(g,null,{default:a(()=>[d(I(s.$route.meta.contentTitle),1)]),_:1}),n(w,null,{default:a(()=>[n(o,{"prepend-icon":"mdi-refresh",onClick:t[0]||(t[0]=()=>{u.get_Categories("")}),class:"bg-info border"},{default:a(()=>[d(" Refresh ")]),_:1}),n(o,{"prepend-icon":"mdi-plus",onClick:t[1]||(t[1]=()=>{e.isAdding=!0}),class:"bg-success border"},{default:a(()=>[d(" Add Category ")]),_:1}),n(p)]),_:1}),n(k,null,{default:a(()=>[n(m,null,{default:a(()=>[(r(!0),N(U,null,B(e.categories,(C,O)=>(r(),c(v,{key:O},{default:a(()=>[n(h,{class:"h5"},{default:a(()=>[d(I(C.name),1)]),_:2},1024),n(y,null,{default:a(()=>[n(b,{onDataChange:D=>{e.categories[O]=D},onChange:t[2]||(t[2]=D=>u.get_Categories("")),main:C},null,8,["onDataChange","main"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),n(l,{modelValue:e.isAdding,"onUpdate:modelValue":t[5]||(t[5]=C=>e.isAdding=C),fullscreen:""},{default:a(()=>[n(J,{onChange:t[3]||(t[3]=C=>{u.get_Categories("")}),onClose:t[4]||(t[4]=()=>{e.isAdding=!1}),parent_id:0})]),_:1},8,["modelValue"])],64)}const ae=T($,[["render",ee]]);export{ae as default};
