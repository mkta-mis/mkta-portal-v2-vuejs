import{_ as D,r as n,o as r,e as p,w as t,b as e,g as C,f as a,t as u,c as x,d as P,F as T,a as d}from"./index-a03fb613.js";const B={emits:["change","close"],props:{isDialog:{default:!1,type:Boolean},pageTitle:{default:"Roles",type:String}},data(){return{title:"",description:"",errors:[],isReadonly:!1}},components:{},setup(){},created(){this.password=""},mounted(){},methods:{submit(){this.errors=[],this.title==""&&this.errors.push("Title is required"),this.description==""&&this.errors.push("Description is required"),!(this.errors.length>0)&&this.$axios.post(this.$serverURL+"api/roles/web-admin/action",{tokenString:localStorage.getItem("userToken"),action:"register",data:{title:this.title,description:this.description}}).then(i=>{this.$emit("change")}).catch(i=>{})}}};function N(i,o,R,S,s,m){const _=n("v-spacer"),c=n("v-btn"),f=n("v-card-actions"),b=n("v-card-title"),g=n("v-text-field"),k=n("v-textarea"),y=n("v-list-item"),h=n("v-list"),w=n("v-card-text"),v=n("v-icon"),V=n("v-card");return r(),p(V,{class:"bg-white h-100"},{default:t(()=>[R.isDialog?(r(),p(f,{key:0,"fixed-header":""},{default:t(()=>[e(_),e(c,{fab:"",icon:"mdi-close",class:"bg-danger text-white",onClick:o[0]||(o[0]=l=>i.$emit("close"))})]),_:1})):C("",!0),e(b,{"fixed-header":""},{default:t(()=>[a(u(R.pageTitle),1)]),_:1}),e(w,null,{default:t(()=>[e(g,{modelValue:s.title,"onUpdate:modelValue":o[1]||(o[1]=l=>s.title=l),"prepend-inner-icon":"mdi-format-title","persistent-hint":"",hint:"Title"},null,8,["modelValue"]),e(k,{modelValue:s.description,"onUpdate:modelValue":o[2]||(o[2]=l=>s.description=l),"prepend-inner-icon":"mdi-format-align-justify","persistent-hint":"",hint:"Description"},null,8,["modelValue"]),e(h,{density:"compact"},{default:t(()=>[(r(!0),x(T,null,P(s.errors,l=>(r(),p(y,null,{default:t(()=>[a(u(l),1)]),_:2},1024))),256))]),_:1})]),_:1}),e(f,null,{default:t(()=>[s.isReadonly?(r(),p(c,{key:0,onClick:o[3]||(o[3]=l=>i.$emit("close")),class:"bg-danger text-white"},{default:t(()=>[e(v,{class:"me-1"},{default:t(()=>[a("mdi-close")]),_:1}),a("Close")]),_:1})):C("",!0),e(_),s.isReadonly?C("",!0):(r(),p(c,{key:1,onClick:m.submit,class:"bg-success"},{default:t(()=>[e(v,{class:"me-1"},{default:t(()=>[a("mdi-account-plus")]),_:1}),a("Register Role")]),_:1},8,["onClick"]))]),_:1})]),_:1})}const z=D(B,[["render",N]]),I={emits:["change","close"],components:{RoleRegistration:z},setup(){},created(){},mounted(){this.get_Roles()},data(){return{show_Registration:!1,data:[],paginate:[],curPage:1,chunkSize:10}},methods:{set_Paginate(){this.paginate=[];for(let i=0;i<this.data.length;i+=this.chunkSize)this.paginate.push(this.data.slice(i,i+this.chunkSize));this.curPage=1},get_Roles(){this.$axios.post(this.$serverURL+"api/roles/get",{}).then(i=>{i.data.code==200&&(this.data=i.data.data,this.set_Paginate())}).catch(i=>{})}}},L=d("thead",null,[d("tr",null,[d("th",{class:"text-left"}," Title "),d("th",{class:"text-left",style:{width:"50px"}}," Users "),d("th",{class:"text-left",style:{width:"50px"}})])],-1),q={class:"text-center"};function F(i,o,R,S,s,m){const _=n("v-card-title"),c=n("v-btn"),f=n("v-card-actions"),b=n("v-card-subtitle"),g=n("v-card"),k=n("router-link"),y=n("v-table"),h=n("v-card-text"),w=n("v-pagination"),v=n("RoleRegistration"),V=n("v-dialog");return r(),x(T,null,[e(g,null,{default:t(()=>[e(_,null,{default:t(()=>[a(u(i.$route.meta.contentTitle),1)]),_:1}),e(f,null,{default:t(()=>[e(c,{"prepend-icon":"mdi-refresh",onClick:o[0]||(o[0]=()=>{m.get_Roles()}),class:"bg-info border"},{default:t(()=>[a(" Refresh ")]),_:1}),e(c,{"prepend-icon":"mdi-plus",class:"bg-info border",onClick:o[1]||(o[1]=()=>{s.show_Registration=!0})},{default:t(()=>[a(" Register Role ")]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(y,{"fixed-header":""},{default:t(()=>[L,d("tbody",null,[(r(!0),x(T,null,P(s.paginate[s.curPage-1],(l,U)=>(r(),x("tr",{key:U},[d("td",null,[e(g,{elevation:"0",flat:""},{default:t(()=>[e(_,null,{default:t(()=>[a(u(l.title),1)]),_:2},1024),e(b,null,{default:t(()=>[a(u(l.description),1)]),_:2},1024)]),_:2},1024)]),d("td",q,u(l.users.length),1),d("td",null,[e(k,{class:"text-decoration-none",to:{name:"Dashboard Role Index",params:{roleIndex:l.id}}},{default:t(()=>[e(c,{fab:"",variant:"outlined",class:"my-1",icon:"mdi-eye"})]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(w,{modelValue:s.curPage,"onUpdate:modelValue":o[2]||(o[2]=l=>s.curPage=l),length:s.paginate.length,"total-visible":7},null,8,["modelValue","length"])]),_:1})]),_:1}),e(V,{modelValue:s.show_Registration,"onUpdate:modelValue":o[5]||(o[5]=l=>s.show_Registration=l),width:"800"},{default:t(()=>[e(v,{isDialog:!0,onClose:o[3]||(o[3]=()=>{s.show_Registration=!1}),onChange:o[4]||(o[4]=()=>{s.show_Registration=!1,m.get_Roles()})})]),_:1},8,["modelValue"])],64)}const E=D(I,[["render",F]]);export{E as default};
