import{_ as I,r as n,o as i,e as u,w as t,b as e,f as r,g as T,c as V,F as x,d as U,t as R}from"./index-6f9e8229.js";const N={emits:[],components:{},props:{},data(){return{userToken:this.$route.params.userToken,reset:{password:"",isVisible:!1},Account:{id:-1,name:"",email:"",isClient:0,hasDashboard:1,isActive:1},Orig_Data:{name:"",email:"",isClient:0,hasDashboard:1,isActive:1}}},setup(){},created(){this.get_Account_Info()},mounted(){},methods:{reset_password(){this.$axios.post(this.$serverURL+"api/users/web-admin/reset-password",{tokenString:localStorage.getItem("userToken"),userToken:this.userToken}).then(l=>{l.data.code==200&&(this.reset.isVisible=!0,this.reset.password=l.data.results)}).catch(l=>{})},get_Account_Info(){this.$axios.post(this.$serverURL+"api/users/web-admin/list",{mode:"exact-token",tokenString:localStorage.getItem("userToken"),data:{userToken:this.userToken}}).then(l=>{l.data.code==200&&(this.Account=l.data.results,this.Orig_Data=JSON.parse(JSON.stringify(l.data.results)))}).catch(l=>{})}}};function E(l,o,D,S,s,p){const d=n("v-btn"),_=n("v-card-actions"),f=n("v-text-field"),m=n("v-card-text"),k=n("v-spacer"),w=n("v-icon"),h=n("v-card");return i(),u(h,{flat:""},{default:t(()=>[e(_,null,{default:t(()=>[e(d,{size:"small",onClick:o[0]||(o[0]=c=>p.get_Account_Info()),"prepend-icon":"mdi-refresh",variant:"outlined",class:"bg-primary"},{default:t(()=>[r("Refresh")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(f,{class:"my-1",hint:"Name","persistent-hint":"",modelValue:s.Account.name,"onUpdate:modelValue":o[1]||(o[1]=c=>s.Account.name=c)},null,8,["modelValue"]),e(f,{class:"my-1",hint:"Email","persistent-hint":"",modelValue:s.Account.email,"onUpdate:modelValue":o[2]||(o[2]=c=>s.Account.email=c),readonly:!0},null,8,["modelValue"]),s.reset.isVisible?(i(),u(f,{key:0,readonly:!0,modelValue:s.reset.password,"onUpdate:modelValue":o[3]||(o[3]=c=>s.reset.password=c),"persistent-hint":"",hint:"Password"},null,8,["modelValue"])):T("",!0)]),_:1}),e(_,null,{default:t(()=>[e(d,{onClick:o[4]||(o[4]=c=>p.reset_password()),class:"bg-success","prepend-icon":"mdi-account-key"},{default:t(()=>[r("Reset Password")]),_:1}),T("",!0),e(k),s.Account.name!=s.Orig_Data.name?(i(),u(d,{key:1,class:"bg-success"},{default:t(()=>[e(w,{class:"me-1"},{default:t(()=>[r("mdi-content-save")]),_:1}),r("Update Account information")]),_:1})):T("",!0)]),_:1})]),_:1})}const $=I(N,[["render",E]]),F={emits:[],components:{},props:{},data(){return{newRole_data:{showDialog:!1,role_data:null},userToken:this.$route.params.userToken,userRoles:[],currentRoles:[],selectedOptions:0,roles:[]}},setup(){},created(){},mounted(){this.get_Account_Roles(),this.get_Roles()},methods:{append_Role(){this.$axios.post(this.$serverURL+"api/users/web-admin/update",{mode:"append-role",tokenString:localStorage.getItem("userToken"),data:{userToken:this.userToken,role_data:this.newRole_data.role_data}}).then(l=>{l.data.code==200&&this.get_Account_Roles()}).catch(l=>{})},remove_Role(l){this.$axios.post(this.$serverURL+"api/users/web-admin/update",{mode:"remove-role",tokenString:localStorage.getItem("userToken"),data:{userToken:this.userToken,role_data:l}}).then(o=>{o.data.code==200&&this.get_Account_Roles()}).catch(o=>{})},get_Roles(){this.$axios.post(this.$serverURL+"api/roles/get",{}).then(l=>{l.data.code==200&&(this.roles=l.data.data)}).catch(l=>{})},get_Account_Roles(){this.get_Roles(),this.newRole_data.role_data=null,this.newRole_data.showDialog=!1,this.$axios.post(this.$serverURL+"api/users/web-admin/list",{mode:"exact-token-roles",tokenString:localStorage.getItem("userToken"),data:{userToken:this.userToken}}).then(l=>{l.data.code==200&&(this.userRoles=l.data.results,this.currentRoles=[],this.userRoles.forEach(o=>{this.currentRoles.push(o.id)}),this.selectedOptions=0)}).catch(l=>{})}}};function J(l,o,D,S,s,p){const d=n("v-btn"),_=n("v-card-actions"),f=n("v-tab"),m=n("v-spacer"),k=n("v-tabs"),w=n("v-col"),h=n("v-card-title"),c=n("v-card-subtitle"),g=n("v-card-text"),b=n("v-card"),y=n("v-row"),C=n("v-window-item"),v=n("v-window"),O=n("v-select"),L=n("v-dialog");return i(),V(x,null,[e(b,{flat:""},{default:t(()=>[e(_,null,{default:t(()=>[e(d,{onClick:o[0]||(o[0]=a=>p.get_Account_Roles()),"prepend-icon":"mdi-refresh",variant:"outlined",class:"bg-primary"},{default:t(()=>[r("Refresh")]),_:1}),e(d,{variant:"outlined",class:"bg-success","prepend-icon":"mdi-plus",onClick:o[1]||(o[1]=a=>s.newRole_data.showDialog=!0)},{default:t(()=>[r("Append Role")]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(k,{modelValue:s.selectedOptions,"onUpdate:modelValue":o[2]||(o[2]=a=>s.selectedOptions=a),class:"mb-3"},{default:t(()=>[(i(!0),V(x,null,U(s.userRoles,(a,B)=>(i(),u(f,{value:B},{default:t(()=>[r(R(a.title),1)]),_:2},1032,["value"]))),256)),e(m)]),_:1},8,["modelValue"]),e(v,{modelValue:s.selectedOptions,"onUpdate:modelValue":o[3]||(o[3]=a=>s.selectedOptions=a)},{default:t(()=>[(i(!0),V(x,null,U(s.userRoles,(a,B)=>(i(),u(C,null,{default:t(()=>[e(g,null,{default:t(()=>[e(y,{class:"my-2"},{default:t(()=>[e(w,{cols:"12",sm:"12"},{default:t(()=>[r(R(a.description)+" ",1),s.userRoles.length>1?(i(),u(d,{key:0,onClick:A=>p.remove_Role(a.id),"prepend-icon":"mdi-delete",class:"bg-danger text-white float-end my-2"},{default:t(()=>[r("Remove Role")]),_:2},1032,["onClick"])):T("",!0)]),_:2},1024),(i(!0),V(x,null,U(a.permissions,(A,q)=>(i(),u(w,{cols:"12",md:"4"},{default:t(()=>[e(b,{elevation:6,class:"p-2"},{default:t(()=>[e(h,null,{default:t(()=>[r(R(A.permission_data.title),1)]),_:2},1024),e(c,{class:"text-danger"},{default:t(()=>[r(R(A.permission_data.key),1)]),_:2},1024),e(g,null,{default:t(()=>[r(R(A.permission_data.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(L,{modelValue:s.newRole_data.showDialog,"onUpdate:modelValue":o[7]||(o[7]=a=>s.newRole_data.showDialog=a),persistent:"",width:"800"},{default:t(()=>[e(b,null,{default:t(()=>[e(_,null,{default:t(()=>[e(h,null,{default:t(()=>[r(" Append Role to User ")]),_:1}),e(m),e(d,{class:"bg-danger text-white",fab:"",icon:"mdi-close",onClick:o[4]||(o[4]=a=>s.newRole_data.showDialog=!1)})]),_:1}),e(g,null,{default:t(()=>[e(O,{modelValue:s.newRole_data.role_data,"onUpdate:modelValue":o[5]||(o[5]=a=>s.newRole_data.role_data=a),label:"Role","item-value":"id","item-title":"title",items:s.roles.filter(a=>this.currentRoles.indexOf(a.id)==-1)},null,8,["modelValue","items"])]),_:1}),e(_,null,{default:t(()=>[e(d,{class:"bg-danger text-white","prepend-icon":"mdi-close",onClick:o[6]||(o[6]=a=>s.newRole_data.showDialog=!1)},{default:t(()=>[r("Cancel")]),_:1}),e(m),s.newRole_data.role_data!=null?(i(),u(d,{key:0,class:"bg-success text-white","prepend-icon":"mdi-plus",onClick:p.append_Role},{default:t(()=>[r("Append Role")]),_:1},8,["onClick"])):T("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const P=I(F,[["render",J]]),z={emits:[],components:{BasicInformation:$,RoleInformation:P},props:{},data(){return{selectedOptions:0}},setup(){},created(){},mounted(){},methods:{}};function j(l,o,D,S,s,p){const d=n("v-icon"),_=n("v-btn"),f=n("router-link"),m=n("v-col"),k=n("v-tab"),w=n("v-tabs"),h=n("BasicInformation"),c=n("v-window-item"),g=n("RoleInformation"),b=n("v-window"),y=n("v-card"),C=n("v-row");return i(),u(C,null,{default:t(()=>[e(m,{xs:"12",sm:"12"},{default:t(()=>[e(f,{to:{name:"Dashboard User",params:{}}},{default:t(()=>[e(_,{color:"purple"},{default:t(()=>[e(d,null,{default:t(()=>[r("mdi-chevron-left")]),_:1}),r("Back")]),_:1})]),_:1})]),_:1}),e(m,{xs:"12"},{default:t(()=>[e(y,null,{default:t(()=>[e(w,{modelValue:s.selectedOptions,"onUpdate:modelValue":o[0]||(o[0]=v=>s.selectedOptions=v),class:"mb-3"},{default:t(()=>[(i(),V(x,null,U(["Basic Information","Role Information"],(v,O)=>e(k,{value:O},{default:t(()=>[r(R(v),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(b,{modelValue:s.selectedOptions,"onUpdate:modelValue":o[1]||(o[1]=v=>s.selectedOptions=v)},{default:t(()=>[e(c,{value:0},{default:t(()=>[e(h)]),_:1}),e(c,{value:1},{default:t(()=>[e(g)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const H=I(z,[["render",j]]);export{H as default};
