import{_ as C,r as s,o as a,e as m,w as n,b as e,g as R,f as d,t as _,c as y,d as S,F as D,a as l}from"./index-a03fb613.js";const B={emits:["change","close"],props:{isDialog:{default:!1,type:Boolean},pageTitle:{default:"Permissions",type:String}},data(){return{title:"",key:"",description:"",isDefault:!1,errors:[],isReadonly:!1}},components:{},setup(){},created(){this.password=""},mounted(){},methods:{submit(){this.errors=[],this.title==""&&this.errors.push("Title is required"),this.key==""&&this.errors.push("Key is required"),this.description==""&&this.errors.push("Description is required"),!(this.errors.length>0)&&this.$axios.post(this.$serverURL+"api/permissions/web-admin/action",{tokenString:localStorage.getItem("userToken"),action:"register",data:{key:this.key,title:this.title,description:this.description,isDefault:this.isDefault?1:0}}).then(o=>{this.$emit("change")}).catch(o=>{})}}};function N(o,t,x,T,i,p){const f=s("v-spacer"),u=s("v-btn"),h=s("v-card-actions"),b=s("v-card-title"),g=s("v-text-field"),V=s("v-textarea"),w=s("v-switch"),v=s("v-card-text"),k=s("v-icon"),c=s("v-list-item"),P=s("v-list"),U=s("v-card");return a(),m(U,{class:"bg-white h-100"},{default:n(()=>[x.isDialog?(a(),m(h,{key:0,"fixed-header":""},{default:n(()=>[e(f),e(u,{fab:"",icon:"mdi-close",class:"bg-danger text-white",onClick:t[0]||(t[0]=r=>o.$emit("close"))})]),_:1})):R("",!0),e(b,{"fixed-header":""},{default:n(()=>[d(_(x.pageTitle),1)]),_:1}),e(v,null,{default:n(()=>[e(g,{modelValue:i.title,"onUpdate:modelValue":t[1]||(t[1]=r=>i.title=r),"prepend-inner-icon":"mdi-format-title","persistent-hint":"",hint:"Title"},null,8,["modelValue"]),e(g,{modelValue:i.key,"onUpdate:modelValue":t[2]||(t[2]=r=>i.key=r),"prepend-inner-icon":"mdi-key","persistent-hint":"",hint:"Key"},null,8,["modelValue"]),e(V,{modelValue:i.description,"onUpdate:modelValue":t[3]||(t[3]=r=>i.description=r),"prepend-inner-icon":"mdi-format-align-justify","persistent-hint":"",hint:"Description"},null,8,["modelValue"]),e(w,{color:"primary",modelValue:i.isDefault,"onUpdate:modelValue":t[4]||(t[4]=r=>i.isDefault=r),label:"Set as default permission"},null,8,["modelValue"])]),_:1}),e(h,null,{default:n(()=>[i.isReadonly?(a(),m(u,{key:0,onClick:t[5]||(t[5]=r=>o.$emit("close")),class:"bg-danger text-white"},{default:n(()=>[e(k,{class:"me-1"},{default:n(()=>[d("mdi-close")]),_:1}),d("Close")]),_:1})):R("",!0),e(f),i.isReadonly?R("",!0):(a(),m(u,{key:1,onClick:p.submit,class:"bg-success"},{default:n(()=>[e(k,{class:"me-1"},{default:n(()=>[d("mdi-account-plus")]),_:1}),d("Register Permission")]),_:1},8,["onClick"]))]),_:1}),e(v,null,{default:n(()=>[e(P,{density:"compact"},{default:n(()=>[(a(!0),y(D,null,S(i.errors,r=>(a(),m(c,null,{default:n(()=>[d(_(r),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}const q=C(B,[["render",N]]),z={components:{PermissionRegistration:q},setup(){},created(){},mounted(){this.get_Permissions()},data(){return{show_Registration:!1,data:[],paginate:[],curPage:1,chunkSize:10}},methods:{set_Paginate(){this.paginate=[];for(let o=0;o<this.data.length;o+=this.chunkSize)this.paginate.push(this.data.slice(o,o+this.chunkSize));this.curPage=1},get_Permissions(){this.show_Registration=!1,this.$axios.post(this.$serverURL+"api/permissions/web-admin/get",{}).then(o=>{o.data.code==200&&(this.data=o.data.results,this.set_Paginate())}).catch(o=>{})}}},L=l("thead",null,[l("tr",null,[l("th",{class:"text-left"}," Permission "),l("th",null," Description "),l("th",{class:"text-left",style:{width:"50px"}})])],-1),F={class:"fs-5"},I=l("br",null,null,-1),K={class:"text-danger"},j={class:"text-start"};function E(o,t,x,T,i,p){const f=s("v-card-title"),u=s("v-btn"),h=s("v-card-actions"),b=s("router-link"),g=s("v-table"),V=s("v-card-text"),w=s("v-card"),v=s("PermissionRegistration"),k=s("v-dialog");return a(),y(D,null,[e(w,{height:"85vh"},{default:n(()=>[e(f,null,{default:n(()=>[d(_(o.$route.meta.contentTitle),1)]),_:1}),e(h,null,{default:n(()=>[e(u,{"prepend-icon":"mdi-refresh",onClick:t[0]||(t[0]=()=>{p.get_Permissions()}),class:"bg-info border"},{default:n(()=>[d(" Refresh ")]),_:1}),e(u,{"prepend-icon":"mdi-plus",class:"bg-info border",onClick:t[1]||(t[1]=()=>{i.show_Registration=!0})},{default:n(()=>[d(" Register Permission ")]),_:1})]),_:1}),e(V,null,{default:n(()=>[e(g,{"fixed-header":""},{default:n(()=>[L,l("tbody",null,[(a(!0),y(D,null,S(i.paginate[i.curPage-1],(c,P)=>(a(),y("tr",{key:P},[l("td",null,[l("span",F,_(c.title),1),I,l("small",K,_(c.key),1)]),l("td",j,_(c.description),1),l("td",null,[e(b,{class:"text-decoration-none",to:{name:"Dashboard Permission Index",params:{permission_id:c.id}}},{default:n(()=>[e(u,{fab:"",variant:"outlined",class:"my-1",icon:"mdi-eye"})]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1})]),_:1}),e(k,{modelValue:i.show_Registration,"onUpdate:modelValue":t[4]||(t[4]=c=>i.show_Registration=c),width:"800",persistent:""},{default:n(()=>[e(v,{onChange:t[2]||(t[2]=()=>{p.get_Permissions()}),onClose:t[3]||(t[3]=()=>{i.show_Registration=!1}),isDialog:!0})]),_:1},8,["modelValue"])],64)}const G=C(z,[["render",E]]);export{G as default};
